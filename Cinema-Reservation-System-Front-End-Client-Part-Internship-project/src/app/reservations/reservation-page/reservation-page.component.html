<div class="reserve-seat h-screen">
  <div class="stages mt-32 flex w-screen">
    <div
      class="stage stage-style"
      [class.active]="stage === enum.SEAT_SELECTION"
    >
      <p>1</p>
      Seat selection
    </div>
    <div
      class="stage stage-style"
      [class.active]="stage === enum.SIDES_SELECTION"
    >
      <p>2</p>
      Sides selection
    </div>
    <div class="stage stage-style" [class.active]="stage === enum.SUMMARY">
      <p>3</p>
      Summary
    </div>
  </div>

  <div class="content flex">
    @if (movie && projection) {
      <div
        class="projection-info flex h-20 w-screen items-center bg-black text-white"
      >
        <div class="projection-info-wrapper ml-4">
          <h1 class="text-lg font-bold">{{ movie.name }}</h1>
          <p>
            {{ projection.startDate.toString().substring(0, 10) }} -
            {{ projection.startTime }}
          </p>
          <p>Hall {{ projection.hall.name }} - {{ projection.status }}</p>
        </div>
      </div>
    }
  </div>

  <div class="heading-div w-screen border-b p-4">
    <h1 class="text-3xl font-bold">CHOOSE YOUR SEAT</h1>
  </div>

  <div class="stage-content">
    @if (stage === enum.SEAT_SELECTION && projection) {
      <app-hall-layout [hall]="projection.hall"></app-hall-layout>
    }
    @if (stage === enum.SIDES_SELECTION) {
      <app-sides-selection></app-sides-selection>
    }

    @if (stage === enum.SUMMARY) {
      <app-summary></app-summary>
    }

    @if (stage === enum.DONE) {
      <app-done-page></app-done-page>
    }
  </div>

  @if (stage !== enum.DONE) {
    <div class="next-btn-wrapepr flex justify-end">
      @if (showPreviousButton) {
        <app-button
          (click)="goToPreviousPage()"
          width="6rem"
          label="Back"
        ></app-button>
      }
      @if (stage === enum.SUMMARY) {
        <app-button
          (click)="reserveSeat()"
          width="6rem"
          label="Reserve"
        ></app-button>
      }
      @if (showNextButton) {
        <app-button (click)="goToNextStage()" label="Next"></app-button>
      }
    </div>
  }
</div>
